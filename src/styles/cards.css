/* === CARD DESIGN SYSTEM === */
@layer cards {
  /* Foundation card styling */
  .card-base {
    @apply bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700;
    @apply shadow-sm;
  }

  /* Interactive cards with hover states */
  .card-interactive {
    @apply bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700;
    @apply shadow-sm hover:shadow-md transition-all duration-200 ease-out;
    @apply hover:border-gray-300 dark:hover:border-gray-600;
    @apply cursor-pointer;
  }

  /* Selection states with blue theming */
  .card-selected {
    @apply bg-blue-50 dark:bg-blue-950/30 border-blue-200 dark:border-blue-700;
    @apply ring-2 ring-blue-500/20 dark:ring-blue-400/30;
  }

  /* Container query-enabled containers */
  .card-container {
    @apply bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700;
    @apply shadow-sm overflow-hidden;
    container-type: inline-size;
  }

  /* List item cards with spacing and interactions */
  .card-list-item {
    @apply p-3 border-b border-gray-100 dark:border-gray-700 last:border-b-0;
    @apply hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-150;
    @apply cursor-pointer;
  }

  /* === PHASE 7A: EXPANDABLE CARDS === */

  /* Expandable card container with smooth height transitions */
  .card-expandable {
    @apply transition-all duration-300 ease-out;
    @apply overflow-hidden;
  }

  /* Expanded state with enhanced visual feedback */
  .card-expanded {
    @apply bg-gray-50 dark:bg-gray-800;
    @apply border-gray-300 dark:border-gray-600;
    @apply shadow-md;
  }

  /* Preview content area with proper spacing and typography */
  .card-preview-content {
    @apply mt-3 pt-3 border-t border-gray-200 dark:border-gray-600;
    @apply text-sm text-gray-600 dark:text-gray-300;
    @apply bg-gray-50 dark:bg-gray-800/50 rounded-md p-3 mx-1;
    animation: fadeInDown 0.2s ease-out;
  }

  /* Custom animation for preview content */
  @keyframes fadeInDown {
    from {
      opacity: 0;
      transform: translateY(-8px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Expand/collapse icon styling */
  .card-expand-icon {
    @apply w-4 h-4 text-gray-400 dark:text-gray-500;
    @apply transition-transform duration-200 ease-out;
    @apply hover:text-gray-600 dark:hover:text-gray-300;
  }

  /* Rotated state for expanded icon */
  .card-expand-icon-expanded {
    @apply rotate-180;
  }

  /* Preview section headers */
  .card-preview-header {
    @apply text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide;
    @apply mb-2;
  }

  /* Preview data styling */
  .card-preview-data {
    @apply font-mono text-xs text-gray-700 dark:text-gray-300;
    @apply bg-white dark:bg-gray-900 rounded border border-gray-200 dark:border-gray-700;
    @apply p-2 max-h-24 overflow-y-auto;
  }

  /* Preview metadata styling */
  .card-preview-meta {
    @apply flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400;
    @apply mb-2;
  }

  /* Interactive hover area for expand toggle */
  .card-expand-trigger {
    @apply flex items-center gap-2 min-w-0 flex-1;
    @apply hover:bg-gray-100 dark:hover:bg-gray-700/50 rounded-sm px-1 py-0.5 -mx-1 -my-0.5;
    @apply transition-colors duration-150;
  }

  /* Expand button styling */
  .card-expand-button {
    @apply p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-600;
    @apply transition-colors duration-150 flex-shrink-0;
    @apply focus:outline-none focus:ring-2 focus:ring-blue-500/20;
  }

  /* === PHASE 7C: CARD DECK LAYOUTS === */

  /* Grid layout container with adaptive columns */
  .card-grid-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 1rem;
    container-type: inline-size;
    @apply p-4;
  }

  /* Responsive grid adjustments using container queries */
  @container (min-width: 600px) {
    .card-grid-container {
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 1.25rem;
    }
  }

  @container (min-width: 900px) {
    .card-grid-container {
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 1.5rem;
    }
  }

  /* Individual grid item cards */
  .card-grid-item {
    @apply bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700;
    @apply shadow-sm hover:shadow-md transition-all duration-200 ease-out;
    @apply hover:border-gray-300 dark:hover:border-gray-600;
    @apply cursor-pointer;
    @apply flex flex-col;
    min-height: 120px;
    @apply transition-all duration-300 ease-out;
  }

  /* Grid item expanded state */
  .card-grid-item-expanded {
    @apply bg-gray-50 dark:bg-gray-800;
    @apply border-gray-300 dark:border-gray-600;
    @apply shadow-md;
    @apply transform scale-[1.02];
    @apply shadow-lg;
  }

  /* Grid item selected state */
  .card-grid-item-selected {
    @apply bg-blue-50 dark:bg-blue-950/30 border-blue-200 dark:border-blue-700;
    @apply ring-2 ring-blue-500/20 dark:ring-blue-400/30;
    @apply transform scale-[1.01];
  }

  /* Grid item header area */
  .card-grid-header {
    @apply p-4 flex-shrink-0;
    @apply border-b border-gray-100 dark:border-gray-700;
  }

  /* Grid item content area */
  .card-grid-content {
    @apply p-4 flex-1 flex flex-col;
  }

  /* Grid item footer area */
  .card-grid-footer {
    @apply p-4 pt-2 flex-shrink-0;
    @apply border-t border-gray-100 dark:border-gray-700;
    @apply bg-gray-50 dark:bg-gray-800/50;
  }

  /* Grid-specific preview content */
  .card-grid-preview {
    @apply mt-2 p-3 rounded-md;
    @apply bg-gray-50 dark:bg-gray-800/50;
    @apply border border-gray-200 dark:border-gray-600;
    @apply text-sm text-gray-600 dark:text-gray-300;
    animation: fadeInDown 0.2s ease-out;
  }

  /* Compact grid item variant for dense layouts */
  .card-grid-item-compact {
    @apply bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700;
    @apply shadow-sm hover:shadow-md transition-all duration-200 ease-out;
    @apply hover:border-gray-300 dark:hover:border-gray-600;
    @apply cursor-pointer;
    @apply flex flex-col;
    min-height: 100px;
    @apply text-sm;
    @apply transition-all duration-300 ease-out;
  }

  /* Grid responsive typography */
  @container (max-width: 320px) {
    .card-grid-item {
      @apply text-sm;
    }

    .card-grid-header,
    .card-grid-content,
    .card-grid-footer {
      @apply p-3;
    }
  }

  @container (min-width: 400px) {
    .card-grid-item {
      min-height: 140px;
    }
  }

  /* === PHASE 7D: INTERACTIVE CARD STATES === */

  /* Multi-selection styles */
  .card-multi-selected {
    @apply bg-blue-100 dark:bg-blue-900/40 border-blue-300 dark:border-blue-600;
    @apply ring-1 ring-blue-400/30 dark:ring-blue-500/30;
  }

  .card-range-selected {
    @apply bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700;
    @apply ring-1 ring-blue-300/20 dark:ring-blue-600/20;
  }

  /* Multi-selection indicator component */
  .multi-selection-indicator {
    @apply bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-700;
    @apply rounded-lg p-3 mb-4 shadow-sm;
    @apply transition-all duration-200 ease-out;
    animation: slideInDown 300ms ease-out forwards;
  }

  .multi-selection-header {
    @apply flex items-center justify-between mb-3;
  }

  .multi-selection-info {
    @apply flex items-center gap-2;
  }

  .multi-selection-clear {
    @apply p-1 rounded hover:bg-blue-100 dark:hover:bg-blue-800;
    @apply text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200;
    @apply transition-colors duration-150;
    @apply focus:outline-none focus:ring-2 focus:ring-blue-500/20;
  }

  .multi-selection-actions {
    @apply flex items-center gap-2 flex-wrap;
  }

  /* Focus management styles */
  .card-focused {
    @apply ring-2 ring-blue-500/50 dark:ring-blue-400/50;
    @apply ring-offset-2 ring-offset-white dark:ring-offset-gray-800;
  }

  .card-keyboard-focused {
    @apply ring-2 ring-blue-600 dark:ring-blue-400;
    @apply ring-offset-2 ring-offset-white dark:ring-offset-gray-800;
    @apply outline-none;
  }

  /* Drag and drop styles (for future implementation) */
  .card-dragging {
    @apply opacity-50 transform rotate-3 scale-105;
    @apply shadow-lg z-50;
    @apply transition-none;
  }

  .card-drag-preview {
    @apply bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-600;
    @apply shadow-xl p-2 text-sm;
    @apply pointer-events-none;
  }

  .drop-zone {
    @apply bg-blue-50 dark:bg-blue-950/20 border-2 border-dashed border-blue-300 dark:border-blue-600;
    @apply rounded-lg p-4 text-center text-blue-600 dark:text-blue-400;
    @apply transition-all duration-200;
  }

  .drop-zone-active {
    @apply bg-blue-100 dark:bg-blue-900/30 border-blue-400 dark:border-blue-500;
    @apply text-blue-700 dark:text-blue-300;
  }

  /* Multi-selection animations */
  @keyframes slideInDown {
    0% {
      opacity: 0;
      transform: translateY(-8px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes selectionRipple {
    0% {
      transform: scale(1);
      box-shadow: 0 0 0 0 rgb(var(--color-blue-500) / 0.4);
    }
    50% {
      transform: scale(1.02);
      box-shadow: 0 0 0 6px rgb(var(--color-blue-500) / 0.1);
    }
    100% {
      transform: scale(1);
      box-shadow: 0 0 0 0 rgb(var(--color-blue-500) / 0);
    }
  }

  /* Animation classes for multi-selection */
  .card-multi-select-animation {
    animation: selectionRipple 400ms ease-out forwards;
  }

  /* Staggered selection animations for bulk operations */
  .card-bulk-action-animation {
    animation: selectionRipple 300ms ease-out forwards;
    animation-delay: calc(var(--selection-index, 0) * 50ms);
  }
}
